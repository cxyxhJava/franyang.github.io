---
layout:     post
title:      限流算法
subtitle:   令牌桶
date:       2019-11-15
author:     程序猿小哈
header-img: img/db.jpeg
catalog: 	true
tags:
    - 算法
---

# 令牌桶算法


RateLimiter主要由颁发许可证的速率定义。如果没有其他配置，许可证将以固定的速率分发，以每秒许可证的形式定义。许可证将顺利分发，每个许可证之间的延迟将进行调整，以确保保持配置的费率。

可以配置一个RateLimiter去拥有一个预热期,在此期间，每秒钟颁发的许可证稳步增加，直到达到稳定的速率.

例如，假设我们有一个要执行的任务列表，但是我们不想每秒提交超过2个任务:



 
 
 
 final RateLimiter rateLimiter = RateLimiter.create(2.0); // rate is "2 permits per second"
   void submitTasks(List<Runnable> tasks, Executor executor) {
     for (Runnable task : tasks) {
       rateLimiter.acquire(); // may wait
       executor.execute(task);
     }
  }}
 







